(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{275:function(t,e,o){t.exports=o.p+"img/logo.702b3dc.png"},390:function(t,e,o){"use strict";o.r(e);var r={data:function(){return{form:{username:"",password:""},show1:!1,rules:{required:function(t){return!!t||"Required."}},dialog:!1,dialogMsg:"",tel:""}},methods:{validate:function(){var t=this,e=!0;return["username","password"].forEach((function(o){""==t.form[o]&&(e=!1,t.dialog=!0,t.dialogMsg="กรุณากรอกข้อมูลให้ครบถ้วน")})),e},submit:function(){var t=this;this.validate()&&this.$axios.post("https://kpi.cpcrop.com/server/api/auth/login",{Username:this.form.username,Password:this.form.password}).then((function(e){t.$store.dispatch("setEmpData",e.data.data),t.dialog=!0,t.dialogMsg="ระบบได้ทำการส่งรหัส OTP ไปยังโทรศัพท์ของท่านแล้ว",t.tel=e.data.data.employee.contact.Phone_Number;var o=new FormData;o.append("tel",e.data.data.employee.contact.Phone_Number),t.$axios.post("https://line.cpcrop.com/api/otpSend.php",o).then((function(e){t.$store.dispatch("setOtpresponse",{otpresponse:e.data.otpresponse,tel:t.tel}),t.$router.push("/otp")})).catch((function(e){console.log("error otpSend ==> ",e),t.dialog=!0,t.dialogMsg="ผิดพลาด"}))})).catch((function(e){console.error(e),t.dialog=!0,t.dialogMsg="Username หรือ Password ไม่ถูกต้อง"}))},handleOnComplete:function(t){console.log("OTP completed: ",t)},handleOnChange:function(t){console.log("OTP changed: ",t)},handleClearInput:function(){this.$refs.otpInput.clearInput()}}},n=o(61),l=o(85),c=o.n(l),d=o(391),m=o(392),f=o(303),v=o(271),h=o(382),w=o(396),x=o(385),_=o(383),V=o(384),C=o(386),k=o(279),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-app-bar",{attrs:{flat:""}},[r("v-toolbar-title",[t._v("Login")])],1),t._v(" "),r("v-container",[r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[r("div",{staticClass:"text-center my-5"},[r("img",{attrs:{src:o(275),alt:"",width:"200px"}})])])],1),t._v(" "),r("v-row",{attrs:{justify:"center",align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"6"}},[r("form",{attrs:{autocomplete:"off"}},[r("v-text-field",{attrs:{outlined:"",label:"Username",rules:[t.rules.required]},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),t._v(" "),r("v-text-field",{attrs:{outlined:"","append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required],type:t.show1?"text":"password",name:"input-10-1",label:"Password"},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}}),t._v(" "),r("div",{staticClass:"text-center"},[r("v-btn",{staticClass:"w-100 mt-8",attrs:{rounded:"",large:"",color:"primary"},on:{click:t.submit}},[t._v("\n              Login\n            ")])],1)],1)])],1)],1),t._v(" "),r("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title"),t._v(" "),r("v-card-text",{domProps:{innerHTML:t._s(t.dialogMsg)}}),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Ok\n        ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VAppBar:d.a,VBtn:m.a,VCard:f.a,VCardActions:v.a,VCardText:v.c,VCardTitle:v.d,VCol:h.a,VContainer:w.a,VDialog:x.a,VRow:_.a,VSpacer:V.a,VTextField:C.a,VToolbarTitle:k.a})}}]);